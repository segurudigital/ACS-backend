// PM2 Configuration for Production Deployment\nmodule.exports = {\n  apps: [\n    {\n      name: 'acs-backend',\n      script: 'index.js',\n      instances: process.env.CLUSTER_WORKERS || 'max',\n      exec_mode: 'cluster',\n      env: {\n        NODE_ENV: 'production',\n        PORT: 5000\n      },\n      env_production: {\n        NODE_ENV: 'production',\n        PORT: process.env.PORT || 5000\n      },\n      env_development: {\n        NODE_ENV: 'development',\n        PORT: 5000,\n        LOG_LEVEL: 'debug'\n      },\n      // Logging\n      log_file: './logs/pm2-combined.log',\n      out_file: './logs/pm2-out.log',\n      error_file: './logs/pm2-error.log',\n      log_date_format: 'YYYY-MM-DD HH:mm:ss Z',\n      \n      // Process management\n      restart_delay: 4000,\n      max_restarts: 10,\n      min_uptime: '10s',\n      \n      // Memory management\n      max_memory_restart: '500M',\n      \n      // Monitoring\n      watch: false,\n      ignore_watch: ['node_modules', 'logs', '.git'],\n      \n      // Auto restart on file changes (development only)\n      watch_options: {\n        followSymlinks: false\n      },\n      \n      // Health monitoring\n      health_check_grace_period: 3000,\n      \n      // Environment variables\n      source_map_support: true,\n      \n      // Graceful shutdown\n      kill_timeout: 5000,\n      listen_timeout: 8000,\n      \n      // Autorestart settings\n      autorestart: true,\n      \n      // Cron pattern to restart app\n      cron_restart: '0 0 * * *', // Restart daily at midnight\n      \n      // Additional PM2 settings\n      merge_logs: true,\n      \n      // Node.js specific\n      node_args: '--max-old-space-size=1024'\n    }\n  ],\n  \n  deploy: {\n    production: {\n      user: 'deployer',\n      host: 'your-production-server.com',\n      ref: 'origin/main',\n      repo: 'https://github.com/your-org/acs-backend.git',\n      path: '/var/www/acs-backend',\n      'pre-deploy-local': '',\n      'post-deploy': 'npm install && npm run build && pm2 reload ecosystem.config.js --env production',\n      'pre-setup': '',\n      ssh_options: 'ForwardAgent=yes'\n    },\n    staging: {\n      user: 'deployer',\n      host: 'your-staging-server.com',\n      ref: 'origin/develop',\n      repo: 'https://github.com/your-org/acs-backend.git',\n      path: '/var/www/acs-backend-staging',\n      'post-deploy': 'npm install && npm run build && pm2 reload ecosystem.config.js --env staging',\n      ssh_options: 'ForwardAgent=yes'\n    }\n  }\n};
